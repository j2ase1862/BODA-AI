<UserControl x:Class="BODA_VISION_AI.Views.ToolSettings.ToolSettingsView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:local="clr-namespace:BODA_VISION_AI.Views.ToolSettings"
             xmlns:ip="clr-namespace:BODA_VISION_AI.VisionTools.ImageProcessing"
             xmlns:pm="clr-namespace:BODA_VISION_AI.VisionTools.PatternMatching"
             xmlns:ba="clr-namespace:BODA_VISION_AI.VisionTools.BlobAnalysis"
             xmlns:ms="clr-namespace:BODA_VISION_AI.VisionTools.Measurement"
             mc:Ignorable="d"
             d:DesignHeight="600" d:DesignWidth="300"
             Background="#2D2D30">

    <UserControl.Resources>
        <!-- 공통 스타일 -->
        <Style x:Key="SettingLabelStyle" TargetType="TextBlock">
            <Setter Property="Foreground" Value="LightGray"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="Margin" Value="0,5,0,2"/>
        </Style>

        <Style x:Key="SettingTextBoxStyle" TargetType="TextBox">
            <Setter Property="Background" Value="#3E3E42"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderBrush" Value="#555555"/>
            <Setter Property="Padding" Value="5,3"/>
            <Setter Property="Margin" Value="0,0,0,5"/>
        </Style>

        <Style x:Key="SettingSliderStyle" TargetType="Slider">
            <Setter Property="Margin" Value="0,0,0,5"/>
        </Style>

        <Style x:Key="SettingComboBoxStyle" TargetType="ComboBox">
            <Setter Property="Background" Value="#3E3E42"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderBrush" Value="#555555"/>
            <Setter Property="Margin" Value="0,0,0,5"/>
        </Style>

        <Style x:Key="SettingCheckBoxStyle" TargetType="CheckBox">
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="Margin" Value="0,5,0,5"/>
        </Style>

        <Style x:Key="SectionHeaderStyle" TargetType="TextBlock">
            <Setter Property="Foreground" Value="#FFD700"/>
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Margin" Value="0,10,0,5"/>
        </Style>

        <Style x:Key="ButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="#0078D4"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="Padding" Value="10,5"/>
            <Setter Property="Margin" Value="0,5"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Cursor" Value="Hand"/>
        </Style>
    </UserControl.Resources>

    <ScrollViewer VerticalScrollBarVisibility="Auto">
        <ContentControl Content="{Binding}">
            <ContentControl.Resources>
                <!-- Grayscale Tool -->
                <DataTemplate DataType="{x:Type ip:GrayscaleTool}">
                    <StackPanel Margin="10">
                        <TextBlock Text="Grayscale" Style="{StaticResource SectionHeaderStyle}"/>
                        <TextBlock Text="이미지를 흑백으로 변환합니다."
                                   Foreground="Gray" FontSize="11" TextWrapping="Wrap"/>

                        <CheckBox Content="ROI 사용" IsChecked="{Binding UseROI}"
                                  Style="{StaticResource SettingCheckBoxStyle}"/>
                    </StackPanel>
                </DataTemplate>

                <!-- Blur Tool -->
                <DataTemplate DataType="{x:Type ip:BlurTool}">
                    <StackPanel Margin="10">
                        <TextBlock Text="Blur" Style="{StaticResource SectionHeaderStyle}"/>

                        <TextBlock Text="Blur Type" Style="{StaticResource SettingLabelStyle}"/>
                        <ComboBox ItemsSource="{Binding Source={x:Type ip:BlurType}, Converter={x:Static local:EnumToValuesConverter.Instance}}"
                                  SelectedItem="{Binding BlurType}"
                                  Style="{StaticResource SettingComboBoxStyle}"/>

                        <TextBlock Style="{StaticResource SettingLabelStyle}">
                            <Run Text="Kernel Size: "/>
                            <Run Text="{Binding KernelSize}"/>
                        </TextBlock>
                        <Slider Minimum="3" Maximum="31" Value="{Binding KernelSize}"
                                TickFrequency="2" IsSnapToTickEnabled="True"
                                Style="{StaticResource SettingSliderStyle}"/>

                        <TextBlock Style="{StaticResource SettingLabelStyle}">
                            <Run Text="Sigma X: "/>
                            <Run Text="{Binding SigmaX, StringFormat=F1}"/>
                        </TextBlock>
                        <Slider Minimum="0" Maximum="10" Value="{Binding SigmaX}"
                                Style="{StaticResource SettingSliderStyle}"/>

                        <CheckBox Content="ROI 사용" IsChecked="{Binding UseROI}"
                                  Style="{StaticResource SettingCheckBoxStyle}"/>
                    </StackPanel>
                </DataTemplate>

                <!-- Threshold Tool -->
                <DataTemplate DataType="{x:Type ip:ThresholdTool}">
                    <StackPanel Margin="10">
                        <TextBlock Text="Threshold" Style="{StaticResource SectionHeaderStyle}"/>

                        <TextBlock Style="{StaticResource SettingLabelStyle}">
                            <Run Text="Threshold Value: "/>
                            <Run Text="{Binding ThresholdValue, StringFormat=F0}"/>
                        </TextBlock>
                        <Slider Minimum="0" Maximum="255" Value="{Binding ThresholdValue}"
                                Style="{StaticResource SettingSliderStyle}"/>

                        <TextBlock Text="Threshold Type" Style="{StaticResource SettingLabelStyle}"/>
                        <ComboBox ItemsSource="{Binding Source={x:Type ip:ThresholdType}, Converter={x:Static local:EnumToValuesConverter.Instance}}"
                                  SelectedItem="{Binding ThresholdType}"
                                  Style="{StaticResource SettingComboBoxStyle}"/>

                        <CheckBox Content="Otsu 자동 이진화" IsChecked="{Binding UseOtsu}"
                                  Style="{StaticResource SettingCheckBoxStyle}"/>

                        <CheckBox Content="Adaptive Threshold" IsChecked="{Binding UseAdaptive}"
                                  Style="{StaticResource SettingCheckBoxStyle}"/>

                        <TextBlock Style="{StaticResource SettingLabelStyle}">
                            <Run Text="Block Size: "/>
                            <Run Text="{Binding BlockSize}"/>
                        </TextBlock>
                        <Slider Minimum="3" Maximum="51" Value="{Binding BlockSize}"
                                TickFrequency="2" IsSnapToTickEnabled="True"
                                Style="{StaticResource SettingSliderStyle}"
                                IsEnabled="{Binding UseAdaptive}"/>

                        <CheckBox Content="ROI 사용" IsChecked="{Binding UseROI}"
                                  Style="{StaticResource SettingCheckBoxStyle}"/>
                    </StackPanel>
                </DataTemplate>

                <!-- Edge Detection Tool -->
                <DataTemplate DataType="{x:Type ip:EdgeDetectionTool}">
                    <StackPanel Margin="10">
                        <TextBlock Text="Edge Detection" Style="{StaticResource SectionHeaderStyle}"/>

                        <TextBlock Text="Method" Style="{StaticResource SettingLabelStyle}"/>
                        <ComboBox ItemsSource="{Binding Source={x:Type ip:EdgeDetectionMethod}, Converter={x:Static local:EnumToValuesConverter.Instance}}"
                                  SelectedItem="{Binding Method}"
                                  Style="{StaticResource SettingComboBoxStyle}"/>

                        <TextBlock Text="Canny Settings" Style="{StaticResource SectionHeaderStyle}"/>

                        <TextBlock Style="{StaticResource SettingLabelStyle}">
                            <Run Text="Threshold 1: "/>
                            <Run Text="{Binding CannyThreshold1, StringFormat=F0}"/>
                        </TextBlock>
                        <Slider Minimum="0" Maximum="255" Value="{Binding CannyThreshold1}"
                                Style="{StaticResource SettingSliderStyle}"/>

                        <TextBlock Style="{StaticResource SettingLabelStyle}">
                            <Run Text="Threshold 2: "/>
                            <Run Text="{Binding CannyThreshold2, StringFormat=F0}"/>
                        </TextBlock>
                        <Slider Minimum="0" Maximum="255" Value="{Binding CannyThreshold2}"
                                Style="{StaticResource SettingSliderStyle}"/>

                        <CheckBox Content="ROI 사용" IsChecked="{Binding UseROI}"
                                  Style="{StaticResource SettingCheckBoxStyle}"/>
                    </StackPanel>
                </DataTemplate>

                <!-- Morphology Tool -->
                <DataTemplate DataType="{x:Type ip:MorphologyTool}">
                    <StackPanel Margin="10">
                        <TextBlock Text="Morphology" Style="{StaticResource SectionHeaderStyle}"/>

                        <TextBlock Text="Operation" Style="{StaticResource SettingLabelStyle}"/>
                        <ComboBox ItemsSource="{Binding Source={x:Type ip:MorphologyOperation}, Converter={x:Static local:EnumToValuesConverter.Instance}}"
                                  SelectedItem="{Binding Operation}"
                                  Style="{StaticResource SettingComboBoxStyle}"/>

                        <TextBlock Style="{StaticResource SettingLabelStyle}">
                            <Run Text="Kernel Width: "/>
                            <Run Text="{Binding KernelWidth}"/>
                        </TextBlock>
                        <Slider Minimum="1" Maximum="21" Value="{Binding KernelWidth}"
                                Style="{StaticResource SettingSliderStyle}"/>

                        <TextBlock Style="{StaticResource SettingLabelStyle}">
                            <Run Text="Kernel Height: "/>
                            <Run Text="{Binding KernelHeight}"/>
                        </TextBlock>
                        <Slider Minimum="1" Maximum="21" Value="{Binding KernelHeight}"
                                Style="{StaticResource SettingSliderStyle}"/>

                        <TextBlock Style="{StaticResource SettingLabelStyle}">
                            <Run Text="Iterations: "/>
                            <Run Text="{Binding Iterations}"/>
                        </TextBlock>
                        <Slider Minimum="1" Maximum="10" Value="{Binding Iterations}"
                                Style="{StaticResource SettingSliderStyle}"/>

                        <CheckBox Content="ROI 사용" IsChecked="{Binding UseROI}"
                                  Style="{StaticResource SettingCheckBoxStyle}"/>
                    </StackPanel>
                </DataTemplate>

                <!-- Histogram Tool -->
                <DataTemplate DataType="{x:Type ip:HistogramTool}">
                    <StackPanel Margin="10">
                        <TextBlock Text="Histogram" Style="{StaticResource SectionHeaderStyle}"/>

                        <TextBlock Text="Operation" Style="{StaticResource SettingLabelStyle}"/>
                        <ComboBox ItemsSource="{Binding Source={x:Type ip:HistogramOperation}, Converter={x:Static local:EnumToValuesConverter.Instance}}"
                                  SelectedItem="{Binding Operation}"
                                  Style="{StaticResource SettingComboBoxStyle}"/>

                        <TextBlock Text="CLAHE Settings" Style="{StaticResource SectionHeaderStyle}"/>

                        <TextBlock Style="{StaticResource SettingLabelStyle}">
                            <Run Text="Clip Limit: "/>
                            <Run Text="{Binding ClipLimit, StringFormat=F1}"/>
                        </TextBlock>
                        <Slider Minimum="1" Maximum="10" Value="{Binding ClipLimit}"
                                Style="{StaticResource SettingSliderStyle}"/>

                        <CheckBox Content="ROI 사용" IsChecked="{Binding UseROI}"
                                  Style="{StaticResource SettingCheckBoxStyle}"/>
                    </StackPanel>
                </DataTemplate>

                <!-- Template Match Tool -->
                <DataTemplate DataType="{x:Type pm:TemplateMatchTool}">
                    <StackPanel Margin="10">
                        <TextBlock Text="Template Match" Style="{StaticResource SectionHeaderStyle}"/>

                        <TextBlock Style="{StaticResource SettingLabelStyle}">
                            <Run Text="Match Threshold: "/>
                            <Run Text="{Binding MatchThreshold, StringFormat=F2}"/>
                        </TextBlock>
                        <Slider Minimum="0" Maximum="1" Value="{Binding MatchThreshold}"
                                Style="{StaticResource SettingSliderStyle}"/>

                        <TextBlock Style="{StaticResource SettingLabelStyle}">
                            <Run Text="Max Results: "/>
                            <Run Text="{Binding MaxResults}"/>
                        </TextBlock>
                        <Slider Minimum="1" Maximum="50" Value="{Binding MaxResults}"
                                Style="{StaticResource SettingSliderStyle}"/>

                        <TextBlock Text="Multi-Scale" Style="{StaticResource SectionHeaderStyle}"/>
                        <CheckBox Content="Enable Multi-Scale" IsChecked="{Binding EnableMultiScale}"
                                  Style="{StaticResource SettingCheckBoxStyle}"/>

                        <TextBlock Style="{StaticResource SettingLabelStyle}">
                            <Run Text="Min Scale: "/>
                            <Run Text="{Binding MinScale, StringFormat=F2}"/>
                        </TextBlock>
                        <Slider Minimum="0.5" Maximum="1" Value="{Binding MinScale}"
                                Style="{StaticResource SettingSliderStyle}"
                                IsEnabled="{Binding EnableMultiScale}"/>

                        <TextBlock Style="{StaticResource SettingLabelStyle}">
                            <Run Text="Max Scale: "/>
                            <Run Text="{Binding MaxScale, StringFormat=F2}"/>
                        </TextBlock>
                        <Slider Minimum="1" Maximum="2" Value="{Binding MaxScale}"
                                Style="{StaticResource SettingSliderStyle}"
                                IsEnabled="{Binding EnableMultiScale}"/>

                        <TextBlock Text="Multi-Angle" Style="{StaticResource SectionHeaderStyle}"/>
                        <CheckBox Content="Enable Multi-Angle" IsChecked="{Binding EnableMultiAngle}"
                                  Style="{StaticResource SettingCheckBoxStyle}"/>

                        <CheckBox Content="ROI 사용" IsChecked="{Binding UseROI}"
                                  Style="{StaticResource SettingCheckBoxStyle}"/>
                    </StackPanel>
                </DataTemplate>

                <!-- Feature Match Tool -->
                <DataTemplate DataType="{x:Type pm:FeatureMatchTool}">
                    <StackPanel Margin="10">
                        <TextBlock Text="Feature Match" Style="{StaticResource SectionHeaderStyle}"/>

                        <TextBlock Text="Detector Type" Style="{StaticResource SettingLabelStyle}"/>
                        <ComboBox ItemsSource="{Binding Source={x:Type pm:FeatureDetectorType}, Converter={x:Static local:EnumToValuesConverter.Instance}}"
                                  SelectedItem="{Binding DetectorType}"
                                  Style="{StaticResource SettingComboBoxStyle}"/>

                        <TextBlock Style="{StaticResource SettingLabelStyle}">
                            <Run Text="Max Features: "/>
                            <Run Text="{Binding MaxFeatures}"/>
                        </TextBlock>
                        <Slider Minimum="100" Maximum="2000" Value="{Binding MaxFeatures}"
                                Style="{StaticResource SettingSliderStyle}"/>

                        <TextBlock Style="{StaticResource SettingLabelStyle}">
                            <Run Text="Ratio Threshold: "/>
                            <Run Text="{Binding RatioThreshold, StringFormat=F2}"/>
                        </TextBlock>
                        <Slider Minimum="0.5" Maximum="1" Value="{Binding RatioThreshold}"
                                Style="{StaticResource SettingSliderStyle}"/>

                        <TextBlock Style="{StaticResource SettingLabelStyle}">
                            <Run Text="Min Match Count: "/>
                            <Run Text="{Binding MinMatchCount}"/>
                        </TextBlock>
                        <Slider Minimum="4" Maximum="50" Value="{Binding MinMatchCount}"
                                Style="{StaticResource SettingSliderStyle}"/>

                        <CheckBox Content="Draw Matches" IsChecked="{Binding DrawMatches}"
                                  Style="{StaticResource SettingCheckBoxStyle}"/>

                        <CheckBox Content="ROI 사용" IsChecked="{Binding UseROI}"
                                  Style="{StaticResource SettingCheckBoxStyle}"/>
                    </StackPanel>
                </DataTemplate>

                <!-- Blob Tool -->
                <DataTemplate DataType="{x:Type ba:BlobTool}">
                    <StackPanel Margin="10">
                        <TextBlock Text="Blob Analysis" Style="{StaticResource SectionHeaderStyle}"/>

                        <TextBlock Text="Threshold" Style="{StaticResource SectionHeaderStyle}"/>
                        <CheckBox Content="Internal Threshold" IsChecked="{Binding UseInternalThreshold}"
                                  Style="{StaticResource SettingCheckBoxStyle}"/>

                        <TextBlock Style="{StaticResource SettingLabelStyle}">
                            <Run Text="Threshold Value: "/>
                            <Run Text="{Binding ThresholdValue, StringFormat=F0}"/>
                        </TextBlock>
                        <Slider Minimum="0" Maximum="255" Value="{Binding ThresholdValue}"
                                Style="{StaticResource SettingSliderStyle}"
                                IsEnabled="{Binding UseInternalThreshold}"/>

                        <CheckBox Content="Invert Polarity" IsChecked="{Binding InvertPolarity}"
                                  Style="{StaticResource SettingCheckBoxStyle}"/>

                        <TextBlock Text="Area Filter" Style="{StaticResource SectionHeaderStyle}"/>

                        <TextBlock Text="Min Area" Style="{StaticResource SettingLabelStyle}"/>
                        <TextBox Text="{Binding MinArea}" Style="{StaticResource SettingTextBoxStyle}"/>

                        <TextBlock Text="Max Area" Style="{StaticResource SettingLabelStyle}"/>
                        <TextBox Text="{Binding MaxArea}" Style="{StaticResource SettingTextBoxStyle}"/>

                        <TextBlock Text="Shape Filter" Style="{StaticResource SectionHeaderStyle}"/>

                        <TextBlock Style="{StaticResource SettingLabelStyle}">
                            <Run Text="Min Circularity: "/>
                            <Run Text="{Binding MinCircularity, StringFormat=F2}"/>
                        </TextBlock>
                        <Slider Minimum="0" Maximum="1" Value="{Binding MinCircularity}"
                                Style="{StaticResource SettingSliderStyle}"/>

                        <TextBlock Text="Display Options" Style="{StaticResource SectionHeaderStyle}"/>
                        <CheckBox Content="Draw Contours" IsChecked="{Binding DrawContours}"
                                  Style="{StaticResource SettingCheckBoxStyle}"/>
                        <CheckBox Content="Draw Bounding Box" IsChecked="{Binding DrawBoundingBox}"
                                  Style="{StaticResource SettingCheckBoxStyle}"/>
                        <CheckBox Content="Draw Center Point" IsChecked="{Binding DrawCenterPoint}"
                                  Style="{StaticResource SettingCheckBoxStyle}"/>
                        <CheckBox Content="Draw Labels" IsChecked="{Binding DrawLabels}"
                                  Style="{StaticResource SettingCheckBoxStyle}"/>

                        <CheckBox Content="ROI 사용" IsChecked="{Binding UseROI}"
                                  Style="{StaticResource SettingCheckBoxStyle}"/>
                    </StackPanel>
                </DataTemplate>

                <!-- Caliper Tool -->
                <DataTemplate DataType="{x:Type ms:CaliperTool}">
                    <StackPanel Margin="10">
                        <TextBlock Text="Caliper" Style="{StaticResource SectionHeaderStyle}"/>

                        <TextBlock Text="Search Region" Style="{StaticResource SectionHeaderStyle}"/>

                        <TextBlock Text="Start X" Style="{StaticResource SettingLabelStyle}"/>
                        <TextBox Text="{Binding StartPoint.X}" Style="{StaticResource SettingTextBoxStyle}"/>

                        <TextBlock Text="Start Y" Style="{StaticResource SettingLabelStyle}"/>
                        <TextBox Text="{Binding StartPoint.Y}" Style="{StaticResource SettingTextBoxStyle}"/>

                        <TextBlock Text="End X" Style="{StaticResource SettingLabelStyle}"/>
                        <TextBox Text="{Binding EndPoint.X}" Style="{StaticResource SettingTextBoxStyle}"/>

                        <TextBlock Text="End Y" Style="{StaticResource SettingLabelStyle}"/>
                        <TextBox Text="{Binding EndPoint.Y}" Style="{StaticResource SettingTextBoxStyle}"/>

                        <TextBlock Style="{StaticResource SettingLabelStyle}">
                            <Run Text="Search Width: "/>
                            <Run Text="{Binding SearchWidth, StringFormat=F0}"/>
                        </TextBlock>
                        <Slider Minimum="1" Maximum="100" Value="{Binding SearchWidth}"
                                Style="{StaticResource SettingSliderStyle}"/>

                        <TextBlock Text="Edge Detection" Style="{StaticResource SectionHeaderStyle}"/>

                        <TextBlock Text="Polarity" Style="{StaticResource SettingLabelStyle}"/>
                        <ComboBox ItemsSource="{Binding Source={x:Type ms:EdgePolarity}, Converter={x:Static local:EnumToValuesConverter.Instance}}"
                                  SelectedItem="{Binding Polarity}"
                                  Style="{StaticResource SettingComboBoxStyle}"/>

                        <TextBlock Style="{StaticResource SettingLabelStyle}">
                            <Run Text="Edge Threshold: "/>
                            <Run Text="{Binding EdgeThreshold, StringFormat=F0}"/>
                        </TextBlock>
                        <Slider Minimum="1" Maximum="100" Value="{Binding EdgeThreshold}"
                                Style="{StaticResource SettingSliderStyle}"/>

                        <TextBlock Text="Mode" Style="{StaticResource SettingLabelStyle}"/>
                        <ComboBox ItemsSource="{Binding Source={x:Type ms:CaliperMode}, Converter={x:Static local:EnumToValuesConverter.Instance}}"
                                  SelectedItem="{Binding Mode}"
                                  Style="{StaticResource SettingComboBoxStyle}"/>

                        <CheckBox Content="ROI 사용" IsChecked="{Binding UseROI}"
                                  Style="{StaticResource SettingCheckBoxStyle}"/>
                    </StackPanel>
                </DataTemplate>

                <!-- Line Fit Tool -->
                <DataTemplate DataType="{x:Type ms:LineFitTool}">
                    <StackPanel Margin="10">
                        <TextBlock Text="Line Fit" Style="{StaticResource SectionHeaderStyle}"/>

                        <TextBlock Style="{StaticResource SettingLabelStyle}">
                            <Run Text="Num Calipers: "/>
                            <Run Text="{Binding NumCalipers}"/>
                        </TextBlock>
                        <Slider Minimum="2" Maximum="50" Value="{Binding NumCalipers}"
                                Style="{StaticResource SettingSliderStyle}"/>

                        <TextBlock Style="{StaticResource SettingLabelStyle}">
                            <Run Text="Search Length: "/>
                            <Run Text="{Binding SearchLength, StringFormat=F0}"/>
                        </TextBlock>
                        <Slider Minimum="10" Maximum="200" Value="{Binding SearchLength}"
                                Style="{StaticResource SettingSliderStyle}"/>

                        <TextBlock Text="Fit Method" Style="{StaticResource SettingLabelStyle}"/>
                        <ComboBox ItemsSource="{Binding Source={x:Type ms:LineFitMethod}, Converter={x:Static local:EnumToValuesConverter.Instance}}"
                                  SelectedItem="{Binding FitMethod}"
                                  Style="{StaticResource SettingComboBoxStyle}"/>

                        <TextBlock Style="{StaticResource SettingLabelStyle}">
                            <Run Text="Edge Threshold: "/>
                            <Run Text="{Binding EdgeThreshold, StringFormat=F0}"/>
                        </TextBlock>
                        <Slider Minimum="1" Maximum="100" Value="{Binding EdgeThreshold}"
                                Style="{StaticResource SettingSliderStyle}"/>

                        <CheckBox Content="ROI 사용" IsChecked="{Binding UseROI}"
                                  Style="{StaticResource SettingCheckBoxStyle}"/>
                    </StackPanel>
                </DataTemplate>

                <!-- Circle Fit Tool -->
                <DataTemplate DataType="{x:Type ms:CircleFitTool}">
                    <StackPanel Margin="10">
                        <TextBlock Text="Circle Fit" Style="{StaticResource SectionHeaderStyle}"/>

                        <TextBlock Text="Center X" Style="{StaticResource SettingLabelStyle}"/>
                        <TextBox Text="{Binding CenterPoint.X}" Style="{StaticResource SettingTextBoxStyle}"/>

                        <TextBlock Text="Center Y" Style="{StaticResource SettingLabelStyle}"/>
                        <TextBox Text="{Binding CenterPoint.Y}" Style="{StaticResource SettingTextBoxStyle}"/>

                        <TextBlock Style="{StaticResource SettingLabelStyle}">
                            <Run Text="Expected Radius: "/>
                            <Run Text="{Binding ExpectedRadius, StringFormat=F0}"/>
                        </TextBlock>
                        <Slider Minimum="10" Maximum="500" Value="{Binding ExpectedRadius}"
                                Style="{StaticResource SettingSliderStyle}"/>

                        <TextBlock Style="{StaticResource SettingLabelStyle}">
                            <Run Text="Num Calipers: "/>
                            <Run Text="{Binding NumCalipers}"/>
                        </TextBlock>
                        <Slider Minimum="3" Maximum="64" Value="{Binding NumCalipers}"
                                Style="{StaticResource SettingSliderStyle}"/>

                        <TextBlock Text="Fit Method" Style="{StaticResource SettingLabelStyle}"/>
                        <ComboBox ItemsSource="{Binding Source={x:Type ms:CircleFitMethod}, Converter={x:Static local:EnumToValuesConverter.Instance}}"
                                  SelectedItem="{Binding FitMethod}"
                                  Style="{StaticResource SettingComboBoxStyle}"/>

                        <TextBlock Style="{StaticResource SettingLabelStyle}">
                            <Run Text="Edge Threshold: "/>
                            <Run Text="{Binding EdgeThreshold, StringFormat=F0}"/>
                        </TextBlock>
                        <Slider Minimum="1" Maximum="100" Value="{Binding EdgeThreshold}"
                                Style="{StaticResource SettingSliderStyle}"/>

                        <CheckBox Content="ROI 사용" IsChecked="{Binding UseROI}"
                                  Style="{StaticResource SettingCheckBoxStyle}"/>
                    </StackPanel>
                </DataTemplate>

                <!-- Default (No Tool Selected) -->
                <DataTemplate DataType="{x:Type x:Object}">
                    <StackPanel Margin="10" VerticalAlignment="Center" HorizontalAlignment="Center">
                        <TextBlock Text="도구를 선택하세요"
                                   Foreground="Gray"
                                   FontSize="14"
                                   HorizontalAlignment="Center"/>
                    </StackPanel>
                </DataTemplate>
            </ContentControl.Resources>
        </ContentControl>
    </ScrollViewer>
</UserControl>
